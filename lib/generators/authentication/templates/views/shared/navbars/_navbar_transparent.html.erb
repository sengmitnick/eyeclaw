<!-- Transparent Navbar - Perfect for landing pages with hero sections -->
<!--
SCROLL EFFECT:
This navbar includes automatic scroll detection via navbar-scroll controller.
- Starts transparent (bg-transparent)
- Becomes solid (bg-surface-elevated + shadow + border) when scrolled down 50px
- The controller is automatically generated at: app/javascript/controllers/navbar_scroll_controller.ts

STYLE VARIANTS - Uncomment or modify classes below to customize:

Initial State (transparent):
- Fully transparent (default): bg-transparent
- Subtle: bg-white/5 dark:bg-black/5
- With blur: backdrop-blur-sm bg-transparent

Scrolled State:
- Solid (default): bg-surface-elevated shadow-md border-b border-border
- Glass: backdrop-blur-md bg-surface-elevated/90 shadow-sm
- White: bg-white dark:bg-gray-900 shadow-lg

Text Color (for transparent state):
- Auto adapt: text-gray-900 dark:text-white (default)
- Always white: text-white
- Custom: text-gray-700

Size:
- Compact: h-14
- Normal (default): h-16
- Large: h-20

Position:
- Fixed (recommended): fixed top-0 left-0 right-0 z-50
- Sticky: sticky top-0 z-50
- Static: no position class
-->
<!-- DO NOT modify data-controller, data-action, or data-dropdown-target attributes (except to add navbar-scroll) -->

<div data-controller="dropdown" data-dropdown-close-on-click-outside-value="false">
  <%# Use fixed positioning on homepage, sticky on other pages for better scroll behavior %>
  <nav class="<%= controller_name == 'home' && action_name == 'index' ? 'fixed top-0 bg-transparent' : 'sticky top-0 bg-surface-elevated shadow-md border-b border-border' %> left-0 right-0 z-50"
       data-controller="<%= controller_name == 'home' && action_name == 'index' ? 'navbar-scroll' : '' %>">
    <div class="container-xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">

        <!-- Logo -->
        <div class="flex items-center gap-2">
          <%= link_to Rails.application.config.x.appname, root_path, class: "text-xl font-bold #{controller_name == 'home' && action_name == 'index' ? 'text-gray-900 dark:text-white' : 'text-primary'}" %>
        </div>

        <!-- Desktop navigation -->
        <div class="hidden md:flex items-center space-x-6">
          <%= render 'shared/nav_links' %>
        </div>

        <!-- Desktop auth -->
        <div class="hidden md:flex items-center space-x-4">
          <% if current_user %>
            <%= render 'shared/user_dropdown' %>
          <% else %>
            <%= link_to "Sign In", sign_in_path, class: "text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white font-medium" %>
            <%= link_to "Get Started", sign_up_path, class: "btn-primary btn-sm" %>
          <% end %>
        </div>

        <!-- Mobile hamburger - DO NOT REMOVE -->
        <button type="button"
                data-action="click->dropdown#toggle"
                class="md:hidden p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100/10 rounded-lg transition-colors">
          <%= lucide_icon "menu", class: "w-6 h-6" %>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile drawer - DO NOT REMOVE this structure -->
  <div data-dropdown-target="menu" class="hidden fixed inset-0 z-[100] md:hidden">
    <!-- Background overlay -->
    <div class="fixed inset-0 bg-black/50" data-action="click->dropdown#close"></div>

    <!-- Drawer content -->
    <div class="fixed right-0 top-0 h-full w-64 bg-surface-elevated shadow-xl overflow-y-auto">
      <div class="p-4">
        <!-- Close button -->
        <button type="button"
                data-action="click->dropdown#close"
                class="mb-4 p-2 hover:bg-surface rounded-lg transition-colors">
          <%= lucide_icon "x", class: "w-6 h-6" %>
        </button>

        <!-- Mobile navigation -->
        <div class="mb-6 flex flex-col space-y-2">
          <%= render 'shared/nav_links' %>
        </div>

        <!-- Mobile user menu -->
        <div class="border-t border-gray-300 dark:border-gray-700 pt-4">
          <% if current_user %>
            <%= render 'shared/user_dropdown' %>
          <% else %>
            <div class="flex flex-col space-y-2">
              <%= link_to "Sign In", sign_in_path, class: "btn-ghost btn-md w-full" %>
              <%= link_to "Get Started", sign_up_path, class: "btn-primary btn-md w-full" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ⚠️ IMPORTANT: This navbar uses fixed positioning on homepage only -->
<!-- Homepage (home/index.html.erb): Add data-testid="home-first-section" class="pt-20" to your first content section (as direct child of container) -->
<!-- Other pages use sticky positioning - no extra padding needed -->
